<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>  <!-- GCH 2019/03/11 ADD-->
</head>
<link rel="stylesheet" href="../../css/bootstrap.min.css" />
<link href="../../css/plugins/bootstrapTable/bootstrap-table.min.css" rel="stylesheet" />
<link href="../../css/plugins/sweetalert/sweetalert.css" rel="stylesheet" />
<link href="../../css/ReportConfig.css" rel="stylesheet" />

<script src="../../Scripts/jquery-1.9.1.min.js"></script>
<script src="../../Scripts/jquery.cookie.js"></script>
<script src="../../Scripts/bootstrap.min.js"></script>
<script src="../../Scripts/plugins/bootstrapTable/bootstrap-table.min.js"></script>
<script src="../../Scripts/plugins/layer/layer.min.js"></script>
<script src="../../Scripts/plugins/sweetalert/sweetalert.min.js"></script>

<script src="../../Scripts/global.js"></script>
<script src="../../Scripts/MesClient.js"></script>
<script src="../../Scripts/MesClient.UI.js"></script>
<script src="../../Scripts/Report/MesClient.ReportConfig.js"></script>
<style>
    .adf-tip {
        display:inline-block;
            padding:20px 60px;
            /*background:#ddd;*/
            width:100%;
            line-height:26px;
            top:0px;
    }


    .hidden {
        display: none;
    }
</style>

<body>
    <div class="title">
        <i class="glyphicon glyphicon-tags">&nbsp;</i><span set-lan="html:"></span>
    </div>
    <div class="list">
        <div class="btnList"></div>
        <div class="query">
            <div class="input">
                <input type="text" value="" placeholder="" />
            </div>
        </div>
    </div>
    <div class="tab">
        <table></table>
    </div>

    <div class="adf-tip hidden">
        <p class="glyphicon fa fa-lightbulb-o"> 溫馨提示：</p>
        <p>1.輸入MAIN_SKUNO輸入要掃描ADF的產品料號.</p>
        <p>2.當需要卡關SI料號時在SKUNO處輸入SI的產品料號.</p>
        <p>3.在KP_PARTNO處輸入ADF物料的料號</p>
        <p>4.Station處輸入“ADF”</p>
        <p>5.Qty輸入對應的數量</p>
        <p>6.SEQ輸入掃描順序“1”“2” 序列號大的先掃描,使用與多種ADF物料需要掃描的情況</p>
        <p>7.Location 處輸入物料的位置,諸如SSD,HDD</p>
        <p>8.PREFIX處輸入ADF物料的SN前綴.</p>
        <p>9.SN LENGTH處輸入 ADF物料的SN.</p>
    </div>

</body>
<script>
    var report = new ConfigReport({
        "pageMsg": {
            "pageName": "ADFInformation",                    //title名
            "setLan": "ADFInformation",                          //该网页的多语言标签名
            "queryTip": "请输入SKUNO或MAIN_SKUNO或KP_PARTNO",             //查询框的提示信息
            "btnMsg": [
                  {
                      "id": "btn0",                                      //该按钮的id,可随意定义
                      "btnName": "New",                             //按钮显示名字，点击该按钮后弹出层的id名（Edit加上Layer ===> EditLayer）注意：需要和layerMsg,apiList,btnClick下的名字一致(非常重要)
                      "icon": "glyphicon glyphicon-plus",      //该按钮的bootstrap字体图标的类名
                      "layerBtnName": "new",                      //点击该按钮弹出窗口的功能按钮名（大框需要，小框不需要）
                      "style": "0",                                      //勾选数据与该按钮是否能操作的关系（0：不勾选数据也能操作  1：仅勾选一条数据后才能操作 2：选中一条或多条数据都可以操作）
                      "layerFlag": true                                //是否弹出大框
                  },
                  {
                      "id": "btn1",
                      "btnName": "Edit",
                      "layerBtnName":"edit",
                      "icon": "glyphicon glyphicon-pencil",
                      "style": "1",
                      "layerFlag": true
                  },
                  {
                      "id": "btn2",
                      "btnName": "Delete",
                      "icon": "glyphicon glyphicon-trash",
                      "style": "1",
                      "layerFlag": false
                  }
            ],
        },
        "apiList": {                                                                 //该网页的重要操作对应的前端与后台交互的api（homePage select 都是固定的写法，除此之外名称全部与按钮名称一致）
            "homePage": {                                                       //首页的api（homePage：固定写法，用于加载首页表数据）
                "className": "MESStation.Config.CKpListDF",   //该api对应的后台的类路径
                "functionName": "GetAllKpListDF",                                  //该api名称（方法名称）
                "colList": ["SKUNO"],                                 //后台接收数据的键的集合（大框操作不需要配置，下同；其它情况此项必填，下同）
                "sendList": [""]                                                 //后台接收数据的值的集合（与键一一对应）
            },
            "select": {                                                            //查询框(select:固定写法，用于快速查询表数据)
                "className": "MESStation.Config.CKpListDF",
                "functionName": "GetAllKpListDF",
                "colList": ["SKUNO"]
            },
            "New": {                                                              //New:与btnName相同，严格对应（大框不需要配置键集合，值集合）
                "className":"MESStation.Config.CKpListDF",
                "functionName":"AddKpListDF"
            },
            "Edit":{
                "className":"MESStation.Config.CKpListDF",
                "functionName":"UpdateById"
            },
            "Delete": {
                "className": "MESStation.Config.CKpListDF",
                "functionName": "DeleteById",
                "colList": ["ID", "SKUNO", "MAIN_SKUNO"]
            },
        },
        "tableMsg": {                                                           //该表的各字段集合
            "column": ["SKUNO", "MAIN_SKUNO", "KP_PARTNO", "STATION", "QTY", "TOTAL_QTY", "SEQ", "LOCATION", "PREFIX", "SN_LENGTH", "COLOR", "CHECK_SKUNO_FLAG", "MPN","CHECK_ADF_FLAG", "EDIT_EMP"] //列名
        },
        "layerMsg": {                                                           //弹出框（针对大框）各个控件的配置
            "New": {                                                             //New:与btnName相同，严格对应
                "showList": [
                    {
                        "field": "SKUNO",                                   //字段名,控件name,控件id(注意：必须使用变量的命名规则),语言配置名（重要）
                        "type": "text",                                         //控件类型（text：普通输入框 select：下拉框 checkbox：复选框 radio：单选框 textarea：大段文本框）
                        "disabled": false,                                     //是否不可编辑
                        "fillFlag": false                                        //弹出框后是否填充数据
                    },
                    {
                        "field": "MAIN_SKUNO",
                        "type": "text",
                        "disabled": false,
                        "fillFlag": false,
                     },
                    {
                        "field": "KP_PARTNO",
                        "type": "text",
                        "disabled": false,
                        "fillFlag": false
                    },
                    {
                        "field": "STATION",
                        "type": "text",
                        "disabled": true,
                        "fillFlag": false
                    },
                    {
                        "field": "QTY",
                        "type": "text",
                        "disabled": false,
                        "fillFlag": false
                    },
                    {
                        "field": "TOTAL_QTY",
                        "type": "text",
                        "disabled": false,
                        "fillFlag": false
                    },
                    {
                        "field": "SEQ",
                         "type": "text",
                         "disabled": true,
                        "fillFlag": false
                    },
                      {
                        "field": "LOCATION",
                         "type": "text",
                        "disabled": false,
                        "fillFlag": false
                    },
                      {
                        "field": "PREFIX",
                         "type": "text",
                        "disabled": false,
                        "fillFlag": false
                    },
                      {
                        "field": "SN_LENGTH",
                         "type": "text",
                        "disabled": false,
                        "fillFlag": false
                    },
                      {
                        "field": "COLOR",
                         "type": "text",
                         "disabled": true,
                        "fillFlag": false
                    },
                      {
                        "field": "CHECK_SKUNO_FLAG",
                         "type": "text",
                         "disabled": true,
                        "fillFlag": false
                    },
                    {
                        "field": "MPN",
                         "type": "text",
                         "disabled": true,
                        "fillFlag": false
                    },
                    {
                        "field": "CHECK_ADF_FLAG",
                        "type": "radio",
                        "disabled": false,
                        "fillFlag": false,
                         "labelList": ["Yes", "No"], 
                         "valList": [1, 0],
                    },
                    {
                        "field": "EDIT_EMP",
                         "type": "text",
                        "disabled": true,
                        "fillFlag": true
                    }],
                "sendList": ["SKUNO", "MAIN_SKUNO", "KP_PARTNO", "STATION", "QTY", "TOTAL_QTY", "SEQ", "LOCATION", "PREFIX", "SN_LENGTH", "COLOR", "CHECK_SKUNO_FLAG", "MPN", "CHECK_ADF_FLAG", "EDIT_EMP"]              //发送给后台的字段集合
            },
            "Edit": {
                "showList": [
                     {
                         "field": "ID",                                   //字段名,控件name,控件id(注意：必须使用变量的命名规则),语言配置名（重要）
                         "type": "text",                                         //控件类型（text：普通输入框 select：下拉框 checkbox：复选框 radio：单选框 textarea：大段文本框）
                         "disabled": true,                                     //是否不可编辑
                         "fillFlag": true                                        //弹出框后是否填充数据
                     },
                    {
                        "field": "SKUNO",                                   //字段名,控件name,控件id(注意：必须使用变量的命名规则),语言配置名（重要）
                        "type": "text",                                         //控件类型（text：普通输入框 select：下拉框 checkbox：复选框 radio：单选框 textarea：大段文本框）
                        "disabled": false,                                     //是否不可编辑
                        "fillFlag": true//弹出框后是否填充数据
                    },
                    {
                        "field": "MAIN_SKUNO",
                        "type": "text",
                        "disabled": false,
                        "fillFlag": true,
                    },
                    {
                        "field": "KP_PARTNO",
                        "type": "text",
                        "disabled": false,
                        "fillFlag": true
                    },
                    {
                        "field": "STATION",
                        "type": "text",
                        "disabled": true,
                        "fillFlag": true
                    },
                    {
                        "field": "QTY",
                        "type": "text",
                        "disabled": true,
                        "fillFlag": true
                    },
                    {
                        "field": "TOTAL_QTY",
                        "type": "text",
                        "disabled": false,
                        "fillFlag": true
                    },
                    {
                        "field": "SEQ",
                        "type": "text",
                        "disabled": true,
                        "fillFlag": true
                    },
                      {
                          "field": "LOCATION",
                          "type": "text",
                          "disabled": true,
                          "fillFlag": true
                      },
                      {
                          "field": "PREFIX",
                          "type": "text",
                          "disabled": false,
                          "fillFlag": true
                      },
                      {
                          "field": "SN_LENGTH",
                          "type": "text",
                          "disabled": false,
                          "fillFlag": true
                      },
                      {
                          "field": "COLOR",
                          "type": "text",
                          "disabled": true,
                          "fillFlag": true
                      },
                      {
                          "field": "CHECK_SKUNO_FLAG",
                          "type": "text",
                          "disabled": true,
                          "fillFlag": true
                      },
                    {
                        "field": "MPN",
                        "type": "text",
                        "disabled": true,
                        "fillFlag": true
                    },
                    {
                        "field": "CHECK_ADF_FLAG",
                        "type": "radio",
                        "disabled": false,
                        "fillFlag": true,
                         "labelList": ["Yes", "No"], 
                         "valList": [1, 0]
                    },
                    {
                        "field": "EDIT_EMP",
                        "type": "text",
                        "disabled": true,
                        "fillFlag": true
                    }
              ],
                "sendList": ["ID", "SKUNO", "MAIN_SKUNO", "KP_PARTNO", "STATION", "QTY", "TOTAL_QTY", "SEQ", "LOCATION", "PREFIX", "SN_LENGTH", "COLOR", "CHECK_SKUNO_FLAG", "MPN", "CHECK_ADF_FLAG", "EDIT_EMP"]              //发送给后台的字段集合
            },
        },
        "loadLayerData": {                                              //弹出框的控件的所有操作（大框内特殊控件数据加载[加载完页面数据后自动执行]）
            "New": function (loadSelect, generatTable) {   //createToobar
                console.log(this);
                var adfTip = $(".adf-tip");
                adfTip.removeClass("hidden");
                this.append(adfTip);
                this.find("input[name=STATION]").val("ADF");
                //  console.log($("#btn0"));
                //  creatFile($("#btn0"));
            }

                //generatTable({
                //    //tableName           //表的类名
                //    //fields               //表字段集合
                //    //tableData            //表数据
                //    //eventObj            //表格的事件
                //    //btnArr              //按钮的配置数据
                //    //$prev              //按钮行的上一个控件，用来插入按钮行
                //    tableName: "table1",
                //    $prev: this.find("input[name=EDIT_EMP]").parent().parent(),
                //    btnArr: [
                //    {
                //        btnName: "Add",                                  //按钮名称，按钮id（layDeleteBtn）多语言配置（set-lan="html:layDelete"）
                //        icon: "glyphicon glyphicon-share",          //按钮小图标
                //        style: 0                                                //按钮交互样式 0：不勾选数据也能操作按钮 1：勾选一条数据才能操作按钮
                //    },
                //    {
                //        btnName: "Edit",
                //        icon: "glyphicon glyphicon-share",
                //        style: 1
                //    },
                //    {
                //        btnName: "Delete",
                //        icon: "glyphicon glyphicon-share",
                //        style: 1
                //    }
                //    ],
                //    fields: ["xxx1", "xxx2", "xxx3", "xxx4", "xxx5", "xxx6"],
                //    tableData: [
                //        {
                //            "xxx1": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx2": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx3": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx4": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx5": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx6": "xxxxxxxxxxxxxxxxxxxx",
                //        },
                //        {
                //            "xxx1": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx2": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx3": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx4": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx5": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx6": "xxxxxxxxxxxxxxxxxxxx",
                //        },
                //        {
                //            "xxx1": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx2": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx3": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx4": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx5": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx6": "xxxxxxxxxxxxxxxxxxxx",
                //        },
                //        {
                //            "xxx1": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx2": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx3": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx4": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx5": "xxxxxxxxxxxxxxxxxxxx",
                //            "xxx6": "xxxxxxxxxxxxxxxxxxxx",
                //        },
                //    ],
                //    eventObj: {
                //        "onCheck": function (checkedData) {                         //选中数据后的所有操作（一般对style=0的按钮绑定事件） checkedData :选中的数据 this:表格
                //            //console.log(this, checkedData, $(".layDeleteBtn"));
                //            var _this = this;
                //            $(".layDeleteBtn").off("click");                           //取消绑定事件
                //            $(".layDeleteBtn").on("click", function () {         //选中数据后绑定事件
                //                console.log(_this,checkedData);
                //            });
                //        },
                //        "onUncheck": function () {                                      //取消选中数据执行
                //            $(".layDeleteBtn").off("click");                            //取消选中数据后取消绑定事件
                //        }
                //    },
                //});
            //    function creatFile($last) {    //下一个按钮
            //        var file = $("<div class='file'></div>");
            //        var fileInput = $("<input id='file' type='file' accept='.xlsx,xls' />");
            //        file.append(fileInput);
            //        file.css({
            //            float: "left",
            //            borderRight: "1px solid #337ab7",
            //            height: "100%",
            //            padding: "2px 2px",
            //            outline: "none",
            //            cursor:"pointer"
            //        });
            //        file.hover(function () {
            //            $(this).css({
            //                background: "#337ab7",
            //                color: "#fff"
            //            });
            //        }, function () {
            //            $(this).css({
            //                background: "#fff",
            //                color: "#000"
            //            });
            //        });
            //        var uploadBtn = $("<div id='upload'></div>");
            //        var i = $("<i class='glyphicon glyphicon-open'></i>");
            //        var span = $("<span set-lan='html:upload'>Upload</span>");
            //        uploadBtn.css({
            //            float: "left",
            //            borderRight: "1px solid #337ab7",
            //            height: "100%",
            //            padding: "5px 15px",
            //            cursor:"pointer"
            //        });
            //        uploadBtn.hover(function () {
            //            $(this).css({
            //                background: "#337ab7",
            //                color: "#fff"
            //            });
            //        }, function () {
            //            $(this).css({
            //                background: "#fff",
            //                color: "#000"
            //            });
            //        });
            //        uploadBtn.append(i);
            //        uploadBtn.append(span);
            //        $last.before(uploadBtn);
            //        uploadBtn.before(file);
            //    }
            //},
            //"Edit": function (loadSelect, generatTable) {
            //    var arr = [
            //        "vsfvwerfwerfwefwefefw",
            //        "dwqdqwwdjlkwdjhwkuydh",
            //        "fdqwudhkwqydiuqwyud"
            //    ];
            //}
        },
        "btnClick": {                                                       //点击按钮及后续所有操作（所有弹出框都要配置，大框动态变化，处理特殊控件（如表格），处理数据[用于发送至后台]，返回数据）
            "Delete": function (chData, fun1, fun2) {            //小框（chData：选中的数据 fun1：不弹出框直接执行[与后台交互] fun2：弹出小框后确定操作再执行）
                fun2();
            },
            "Edit": {
                "retSendData": function (sendData) {                                    //点击按钮执行（二次处理数据，sendData：第一次处理的发送数据 this：弹出框）
                    return sendData;                                                              //返回的数据为最终发送的数据 重要！！！
                },
                "callBackPass": function (e, msgTip, $table, $layerBtn) {          //接收的数据pass后的操作（this：弹出框 e：接收的数据 msgTip：提示函数，不包含刷新页面，$table：表格节点，$layerBtn：弹出框的按钮集合）
                    msgTip();                                                                      //提示信息
                    //$table.eq(1).bootstrapTable("load", e.Data);                      //二次加载表数据
                    //$table.find(".bs-checkbox").css({                                    //选择框居中
                    //    "text-align": "center",
                    //    "vertical-align": "middle",
                    //});
                    //$layerBtn[2].click();                                                        //关闭弹出框
                    location.reload();                                                             //刷新整个页面
                },
                "callBackFail": function (e, msgTip, $table, $layerBtn) {             //请求失败后的操作，参数上同
                    msgTip();
                  //  console.log(this, msgTip, $table);
                  //  $table.eq(1).bootstrapTable("load", e.Data);
                }
            },
            "New": {
                "retSendData": function (sendData) {
                    return sendData;
                },
                "callBackPass": function (e, msgTip, $table, $layerBtn) {
                    msgTip();
                },
                "callBackFail": function (e, msgTip, $table, $layerBtn) {
                    msgTip();
                }
            }
        }
    });


    //function ConfigReport(o) {
    //    var _this = this;
    //    this.pageMsg = o.pageMsg;
    //    this.apiList = o.apiList;
    //    this.layerMsg = o.layerMsg;
    //    this.tableMsg = o.tableMsg;
    //    this.layerData = o.loadLayerData;
    //    this.btnClick = o.btnClick;
    //    ConfigReport.prototype.Init = function () {
    //        //生成报表网页基本结构(包括按钮,弹出层结构)
    //        this.ReportHTML(this.pageMsg);
    //        //接收首页数据，show首页数据，回调
    //        self.parent.client.CallFunction(this.apiList["homePage"]["className"], this.apiList["homePage"]["functionName"], this.sendData(this.apiList["homePage"]["colList"], this.apiList["homePage"]["sendList"]), function (e) {
    //            if (e.Status == "Pass") {
    //                _this.InitCallback(e.Data);
    //            } else {
    //                _this.InitCallback([]);
    //            }
    //        });
    //        //加载弹出层，生成控件，控制样式，
    //        this.loadLayer(this.layerMsg);
    //        //加载特殊控件内数据（下拉数据等），
    //        this.loadLayerData(this.layerData);
    //        //事件触发逻辑
    //        this.clickEvent();
    //    }
    //    ConfigReport.prototype.ReportHTML = function (obj) {
    //        $(".title span").html(obj.pageName);                                  //页面名
    //        $(".title span").attr("set-lan", "html:" + obj.setLan);            //多语言
    //        $(".query input").attr("placeholder", obj.queryTip);               //显示提示信息
    //        this.generateBtn(obj.btnMsg);                                              //生成按钮
    //        this.generateLayerHTML(obj.btnMsg);                                   //生成弹出框结构
    //    }
    //    ConfigReport.prototype.generateBtn = function (arr) {  //生成按钮
    //        var btnContainer = $(".list .btnList");
    //        for (var i = 0; i < arr.length; i++) {
    //            var div = $("<div id=" + arr[i]["id"] + " ></div>");
    //            var oi = $("<i></i>");
    //            var span = $("<span set-lan=" + "html:" + arr[i]["btnName"] + "> " + arr[i]["btnName"] + " </span>");
    //            oi.attr("class", arr[i]["icon"]);
    //            if (arr[i]["style"] == 0) {   //设置按钮初始样式（选择数据后的按钮样式见表格生成处）
    //                div.css({
    //                    "height": "100%",
    //                    "padding": "6px 17px",
    //                    "lineHeight": "22px",
    //                    "color": "rgb(103,106,108)",
    //                    "float": "left",
    //                    "fontSize": "14px",
    //                    "borderRight": "1px solid #337ab7",
    //                    "cursor": "pointer"
    //                });
    //                div.hover(function () {   //移入
    //                    $(this).css({
    //                        "color": "#fff",
    //                        "background": "#286090"
    //                    });
    //                }, function () {           //移出
    //                    $(this).css({
    //                        "color": "rgb(103,106,108)",
    //                        "background": "#fff"
    //                    });
    //                });
    //            } else {
    //                div.css({
    //                    "height": "100%",
    //                    "padding": "6px 17px",
    //                    "lineHeight": "22px",
    //                    "color": "rgba(103,106,108,0.6)",
    //                    "float": "left",
    //                    "fontSize": "14px",
    //                    "borderRight": "1px solid #337ab7",
    //                    "cursor": "no-drop"
    //                });
    //                div.hover(function () {   //移入
    //                    $(this).css({
    //                        "color": "#fff",
    //                        "background": "#337ab7",
    //                        "opacity": "0.6"
    //                    });
    //                }, function () {           //移出
    //                    $(this).css({
    //                        "color": "rgba(103,106,108,0.6)",
    //                        "background": "#fff",
    //                        "opacity": "1"
    //                    });
    //                });
    //            }
    //            div.append(oi);
    //            div.append(span);
    //            btnContainer.append(div);
    //        }
    //    }
    //    ConfigReport.prototype.generateLayerHTML = function (arr) {    //生成弹出框结构
    //        $.each(arr, function (index, btn) {    //遍历按钮
    //            if (btn.layerFlag) {
    //                var id = btn.btnName + "Layer";
    //                var lay = $("<div id = " + id + " class = " + "hidden" + "></div>");
    //                var panel = $("<div class = " + "panel-body" + "></div>");
    //                var row = $("<div class = " + "row" + "></div>");
    //                var br = $("<br>");
    //                row.append(br);
    //                panel.append(row);
    //                lay.append(panel);
    //                //弹出框样式
    //                lay.css({
    //                    "position": "absolute",
    //                    "width": "100%"
    //                });
    //                $(document.body).append(lay);
    //            }
    //        });
    //    }
    //    ConfigReport.prototype.sendData = function (colList, sendList) {       //生成发送数据
    //        var sendData = {};
    //        $.each(colList, function (i, val) {
    //            sendData[val] = sendList[i];
    //        });
    //        return sendData;
    //    }
    //    ConfigReport.prototype.InitCallback = function (e) {
    //        //show首页数据
    //        $(".tab table").bootstrapTable({
    //            data: e,   //e
    //            pagination: true,    //分页显示
    //            pageSize: 10,         //初始化每一页的数据条数
    //            pageList: [10, 25, 50, 100],
    //            search: false,        //显示查找框
    //            striped: true,        //背景色相间
    //            showRefresh: false,   //显示重置按钮
    //            clickToSelect: true,   //单击一行内任意单元格选中该行
    //            singleSelect: true,  //单选
    //            onCheck: function (row) {   //选中
    //                var btn1 = []; //1类按钮
    //                var btn2 = []; //2类按钮
    //                $.each(o.pageMsg["btnMsg"], function (index, val) {
    //                    if (val["style"] == 1) {
    //                        btn1.push($("#" + val["id"]));
    //                    }
    //                    if (val["style"] == 2) {
    //                        btn2.push($("#" + val["id"]));
    //                    }
    //                })
    //                var rows = $('.tab table').bootstrapTable('getAllSelections');  ///getAllSelections
    //                if (rows.length == 1) {   //控制1类btn
    //                    $.each(btn1, function (index, ele) {
    //                        ele.css({                 //初始
    //                            "height": "100%",
    //                            "padding": "6px 17px",
    //                            "lineHeight": "22px",
    //                            "color": "rgb(103, 106, 108)",
    //                            "float": "left",
    //                            "fontSize": "14px",
    //                            "borderRight": "1px solid #337ab7",
    //                            "cursor": "pointer"
    //                        });
    //                        ele.hover(function () {    //移入
    //                            $(this).css({
    //                                "color": "#fff",
    //                                "background": "#286090",
    //                                "opacity": "1"
    //                            });
    //                        }, function () {            //移出
    //                            $(this).css({
    //                                "color": "rgb(103, 106, 108)",
    //                                "background": "#fff"
    //                            });
    //                        });
    //                    });
    //                } else {
    //                    $.each(btn1, function (index, ele) {
    //                        ele.css({                 //初始
    //                            "height": "100%",
    //                            "padding": "6px 17px",
    //                            "lineHeight": "22px",
    //                            "color": "rgba(103,106,108,0.6)",
    //                            "float": "left",
    //                            "fontSize": "14px",
    //                            "borderRight": "1px solid #337ab7",
    //                            "cursor": "no-drop"
    //                        });
    //                        ele.hover(function () {    //移入
    //                            $(this).css({
    //                                "color": "#fff",
    //                                "background": "#337ab7",
    //                                "opacity": "0.6"
    //                            });
    //                        }, function () {            //移出
    //                            $(this).css({
    //                                "color": "rgba(103,106,108,0.6)",
    //                                "background": "#fff",
    //                                "opacity": "1"
    //                            });
    //                        });
    //                    });
    //                }
    //                if (rows.length > 0) {    //控制2类btn
    //                    $.each(btn2, function (index, ele) {
    //                        ele.css({                 //初始
    //                            "height": "100%",
    //                            "padding": "6px 17px",
    //                            "lineHeight": "22px",
    //                            "color": "rgb(103, 106, 108)",
    //                            "float": "left",
    //                            "fontSize": "14px",
    //                            "borderRight": "1px solid #337ab7",
    //                            "cursor": "pointer"
    //                        });
    //                        ele.hover(function () {    //移入
    //                            $(this).css({
    //                                "color": "#fff",
    //                                "background": "#286090",
    //                                "opacity": "1"
    //                            });
    //                        }, function () {            //移出
    //                            $(this).css({
    //                                "color": "rgb(103, 106, 108)",
    //                                "background": "#fff"
    //                            });
    //                        });
    //                    });
    //                } else {
    //                    $.each(btn2, function (index, ele) {
    //                        ele.css({                 //初始
    //                            "height": "100%",
    //                            "padding": "6px 17px",
    //                            "lineHeight": "22px",
    //                            "color": "rgba(103,106,108,0.6)",
    //                            "float": "left",
    //                            "fontSize": "14px",
    //                            "borderRight": "1px solid #337ab7",
    //                            "cursor": "no-drop"
    //                        });
    //                        ele.hover(function () {    //移入
    //                            $(this).css({
    //                                "color": "#fff",
    //                                "background": "#337ab7",
    //                                "opacity": "0.6"
    //                            });
    //                        }, function () {            //移出
    //                            $(this).css({
    //                                "color": "rgba(103,106,108,0.6)",
    //                                "background": "#fff",
    //                                "opacity": "1"
    //                            });
    //                        });
    //                    });
    //                }
    //                checkedData = rows;
    //            },
    //            onUncheck: function (row) {  //取消选中
    //                var btn1 = []; //1类按钮
    //                var btn2 = []; //2类按钮
    //                $.each(o.pageMsg["btnMsg"], function (index, val) {
    //                    if (val["style"] == 1) {
    //                        btn1.push($("#" + val["id"]));
    //                    }
    //                    if (val["style"] == 2) {
    //                        btn2.push($("#" + val["id"]));
    //                    }
    //                })
    //                var rows = $('.tab table').bootstrapTable('getAllSelections');  ///getAllSelections
    //                if (rows.length == 1) {   //控制1类btn
    //                    $.each(btn1, function (index, ele) {
    //                        ele.css({                 //初始
    //                            "height": "100%",
    //                            "padding": "6px 17px",
    //                            "lineHeight": "22px",
    //                            "color": "rgb(103, 106, 108)",
    //                            "float": "left",
    //                            "fontSize": "14px",
    //                            "borderRight": "1px solid #337ab7",
    //                            "cursor": "pointer"
    //                        });
    //                        ele.hover(function () {    //移入
    //                            $(this).css({
    //                                "color": "#fff",
    //                                "background": "#286090",
    //                                "opacity": "1"
    //                            });
    //                        }, function () {            //移出
    //                            $(this).css({
    //                                "color": "rgb(103, 106, 108)",
    //                                "background": "#fff"
    //                            });
    //                        });
    //                    });
    //                } else {
    //                    $.each(btn1, function (index, ele) {
    //                        ele.css({                 //初始
    //                            "height": "100%",
    //                            "padding": "6px 17px",
    //                            "lineHeight": "22px",
    //                            "color": "rgba(103,106,108,0.6)",
    //                            "float": "left",
    //                            "fontSize": "14px",
    //                            "borderRight": "1px solid #337ab7",
    //                            "cursor": "no-drop"
    //                        });
    //                        ele.hover(function () {    //移入
    //                            $(this).css({
    //                                "color": "#fff",
    //                                "background": "#337ab7",
    //                                "opacity": "0.6"
    //                            });
    //                        }, function () {            //移出
    //                            $(this).css({
    //                                "color": "rgba(103,106,108,0.6)",
    //                                "background": "#fff",
    //                                "opacity": "1"
    //                            });
    //                        });
    //                    });
    //                }
    //                if (rows.length > 0) {    //控制2类btn
    //                    $.each(btn2, function (index, ele) {
    //                        ele.css({                 //初始
    //                            "height": "100%",
    //                            "padding": "6px 17px",
    //                            "lineHeight": "22px",
    //                            "color": "rgb(103, 106, 108)",
    //                            "float": "left",
    //                            "fontSize": "14px",
    //                            "borderRight": "1px solid #337ab7",
    //                            "cursor": "pointer"
    //                        });
    //                        ele.hover(function () {    //移入

    //                            $(this).css({
    //                                "color": "#fff",
    //                                "background": "#286090",
    //                                "opacity": "1"
    //                            });
    //                        }, function () {            //移出
    //                            $(this).css({
    //                                "color": "rgb(103, 106, 108)",
    //                                "background": "#fff"
    //                            });
    //                        });
    //                    });
    //                } else {
    //                    $.each(btn2, function (index, ele) {
    //                        ele.css({                 //初始
    //                            "height": "100%",
    //                            "padding": "6px 17px",
    //                            "lineHeight": "22px",
    //                            "color": "rgba(103,106,108,0.6)",
    //                            "float": "left",
    //                            "fontSize": "14px",
    //                            "borderRight": "1px solid #337ab7",
    //                            "cursor": "no-drop"
    //                        });
    //                        ele.hover(function () {    //移入
    //                            $(this).css({
    //                                "color": "#fff",
    //                                "background": "#337ab7",
    //                                "opacity": "0.6"
    //                            });
    //                        }, function () {            //移出
    //                            $(this).css({
    //                                "color": "rgba(103,106,108,0.6)",
    //                                "background": "#fff",
    //                                "opacity": "1"
    //                            });
    //                        });
    //                    });
    //                }
    //                checkedData = rows;
    //            },
    //            columns: this.columns(this.tableMsg["column"])
    //        });
    //        $(".tab table").find(".bs-checkbox").css({
    //            "text-align": "center",
    //            "vertical-align": "middle",
    //        });
    //        $(".tab table").find("td").css({
    //            whiteSpace: "nowrap",
    //            textAlign: "left"
    //        });
    //        //配置语言
    //        this.setLanguage(_this.pageMsg.setLan);
    //    }
    //    ConfigReport.prototype.setLanguage = function (page) {
    //        var client = self.parent.client;
    //        var MesUI = new MesClientUI(client);
    //        MesUI.SetLanguage(page);
    //    }
    //    ConfigReport.prototype.columns = function (colList) {   //生成表格关键数据
    //        var columns = [];
    //        columns.push({
    //            align: 'center',
    //            valign: 'middle',
    //            checkbox: true
    //        });
    //        $.each(colList, function (i, val) {
    //            var title = "<label set-lan=" + "html:" + val + ">" + val + "</label>";
    //            var obj = {
    //                field: val,
    //                title: title,
    //                align: 'center',
    //                valign: 'middle'
    //            };
    //            columns.push(obj);
    //        });
    //        return columns;
    //    }
    //    ConfigReport.prototype.loadLayer = function (layerMsg) {
    //        var self = this;
    //        $.each(this.pageMsg.btnMsg, function (index, obj) {  //遍历按钮
    //            if (obj.layerFlag) {
    //                var layerNode = $("#" + obj.btnName + "Layer" + " .panel-body .row");
    //                $.each(layerMsg[obj.btnName].showList, function (index, control) {
    //                    var ele = self.loadControl(control.field, control.type, control.disabled, control.labelList, control.valList);
    //                    layerNode.append(ele);
    //                });
    //                layerBtn(layerNode, obj.layerBtnName);
    //                //弹出框内部功能按钮样式，内部特殊控件样式
    //                layerNode.find("label").css({
    //                    "marginTop": "6px",
    //                    "paddingRight": "6px",
    //                    "whiteSpace": "nowrap",
    //                    "overflow": "hidden",
    //                    "textOverflow": "ellipsis"
    //                });
    //                layerNode.find("textarea").css("height", "82px");

    //                layerNode.find("input[type=radio]").css({
    //                    "marginTop": "7px",
    //                    "width": "20px",
    //                    "height": "20px"
    //                });
    //                layerNode.find("input[type=radio]").prev().css({
    //                    "display": "inline-block",
    //                    "height": "34px",
    //                    "lineHeight": "34px",
    //                    "position": "relative",
    //                    "top": "-5px"
    //                });
    //                layerNode.find("input[type=radio]").parent().css({
    //                    "lineHeight": "34px"
    //                });
    //                layerNode.find("input[type=checkbox]").css({
    //                    "marginTop": "7px",
    //                    "width": "20px",
    //                    "height": "20px"
    //                });
    //                layerNode.find("input[type=checkbox]").prev().css({
    //                    "display": "inline-block",
    //                    "height": "34px",
    //                    "lineHeight": "34px",
    //                    "position": "relative",
    //                    "top": "-5px"
    //                });
    //                layerNode.find("input[type=checkbox]").parent().css({
    //                    "lineHeight": "34px"
    //                });
    //                //console.log(layerNode.find("input[type=radio]").prev());
    //                layerNode.find("." + obj.layerBtnName + " button").css({
    //                    "background": "#337ab7",
    //                    "fontWeight": "bold",
    //                    "color": "#fff",
    //                    "borderRadius": "15px",
    //                    "boxShadow": "5px 5px 10px #aaa"
    //                });
    //                layerNode.find("." + obj.layerBtnName + " button").hover(function () {    //移入
    //                    $(this).css("background", "#286090");
    //                }, function () {     //移出
    //                    $(this).css("background", "#337ab7");
    //                });
    //            }
    //            function layerBtn($fatherNode, name) {    //生成弹出层内功能按钮（如ADD EDIT）
    //                var odiv = $("<div></div>");
    //                var label = $("<div></div>");
    //                var div = $("<div class=" + "col-xs-4" + "></div>");
    //                var btn = $("<button>" + name + "</button>");
    //                btn.attr("class", "form-control " + name);
    //                label.attr("class", "col-xs-4 control-label text-right");
    //                odiv.attr("class", name + " form-group col-sm-6 col-md-6 hui");
    //                div.append(btn);
    //                odiv.append(label);
    //                odiv.append(div);
    //                $fatherNode.append(odiv);
    //            }
    //        });
    //    }
    //    ConfigReport.prototype.loadControl = function (name, type, disabled, labelList, valList) {   //加载弹出层控件（单个控件）labelList,valList针对单选框，复选框有用
    //        var ele;
    //        switch (type) {
    //            case "text":
    //                ele = $("<div></div>");
    //                var label = $("<label set-lan=" + "html:" + name + ">" + name + "</label>");
    //                var div = $("<div class=" + "col-xs-8" + "></div>");
    //                var oInput;
    //                if (disabled) {
    //                    oInput = $("<input type=" + "text" + " class=" + "form-control" + " id=" + name + " name=" + name + " disabled />");
    //                } else {
    //                    oInput = $("<input type=" + "text" + " class=" + "form-control" + " id=" + name + " name=" + name + " />");
    //                }
    //                label.attr("class", "col-xs-4 control-label text-right");
    //                ele.attr("class", "form-group col-sm-6 col-md-6 hui");
    //                div.append(oInput);
    //                ele.append(label);
    //                ele.append(div);
    //                break;
    //            case "select":
    //                ele = $("<div></div>");
    //                var label = $("<label set-lan=" + "html:" + name + ">" + name + "</label>");
    //                var div = $("<div class=" + "col-xs-8" + "></div>");
    //                var oSelect = $("<select name=" + name + " id=" + name + " class=" + "form-control" + " ></select>");
    //                label.attr("class", "col-xs-4 control-label text-right");
    //                ele.attr("class", "form-group col-sm-6 col-md-6 hui");
    //                div.append(oSelect);
    //                ele.append(label);
    //                ele.append(div);
    //                break;
    //            case "textarea":
    //                ele = $("<div></div>");
    //                var label = $("<label set-lan=" + "html:" + name + ">" + name + "</label>");
    //                var div = $("<div class=" + "col-xs-8" + "></div>");
    //                var oTextarea = $("<textarea name=" + name + " id=" + name + " class=" + "form-control" + " ></textarea>");
    //                label.attr("class", "col-xs-4 control-label text-right");
    //                ele.attr("class", "form-group col-sm-6 col-md-6 hui");
    //                div.append(oTextarea);
    //                ele.append(label);
    //                ele.append(div);
    //                break;
    //            case "file":
    //                ele = $("<div></div>");
    //                var label = $("<label set-lan=" + "html:" + name + ">" + name + "</label>");
    //                var div = $("<div class=" + "col-xs-8" + "></div>");
    //                //<input style="outline: none;" class="form-control" id="uploadFiles" type="file" accept=".xlsx,.xls" />
    //                var oInput = $("<input type=" + "file" + " class=" + "form-control" + " name=" + name + " id=" + name + " />");
    //                label.attr("class", "col-xs-4 control-label text-right");
    //                ele.attr("class", "form-group col-sm-6 col-md-6 hui");
    //                div.append(oInput);
    //                ele.append(label);
    //                ele.append(div);
    //                break;
    //            case "checkbox":
    //                ele = $("<div></div>");
    //                var label = $("<label set-lan=" + "html:" + name + ">" + name + "</label>");
    //                var div = $("<div class=" + "col-xs-8" + "></div>");
    //                var odiv;
    //                $.each(labelList, function (index, val) {
    //                    odiv = $("<div class=" + "col-xs-4" + "></div>");
    //                    var span = $("<span>" + val + " : " + "</span>");
    //                    var oinput = $("<input type=" + "checkbox" + " value=" + valList[index] + " name=" + name + " />");
    //                    odiv.append(span);
    //                    odiv.append(oinput);
    //                    div.append(odiv);
    //                });
    //                label.attr("class", "col-xs-4 control-label text-right");
    //                ele.attr("class", "form-group col-sm-6 col-md-6 hui");
    //                ele.append(label);
    //                ele.append(div);
    //                break;
    //            case "radio":
    //                ele = $("<div></div>");
    //                var label = $("<label set-lan=" + "html:" + name + ">" + name + "</label>");
    //                var div = $("<div class=" + "col-xs-8" + "></div>");
    //                var odiv;
    //                $.each(labelList, function (index, val) {
    //                    odiv = $("<div class=" + "col-xs-4" + "></div>");
    //                    var span = $("<span>" + val + " ： " + "</span>");
    //                    var oinput = $("<input type=" + "radio" + " value=" + valList[index] + " name=" + name + " />");
    //                    odiv.append(span);
    //                    odiv.append(oinput);
    //                    div.append(odiv);
    //                });
    //                label.attr("class", "col-xs-4 control-label text-right");
    //                ele.attr("class", "form-group col-sm-6 col-md-6 hui");
    //                ele.append(label);
    //                ele.append(div);
    //                break;
    //        }
    //        return ele;
    //    }
    //    ConfigReport.prototype.loadLayerData = function (layerData) {    //加载弹出层内特殊控件数据，弹出层的所有操作，弹出层所有事件触发逻辑！！！非常重要！！！
    //        $.each(layerData, function (key, fun) {
    //            var layNode = $("#" + key + "Layer");
    //            var args = [loadSelectData, generatLayerTable.bind(layNode)];
    //            fun.apply(layNode, args);    //生成下拉框的方法,生成表格的方法,后续再补充功能，this为当前弹出层！！！
    //        });
    //        function generatLayerTable(tabObj) {        //生成弹出框内的表格(tableName: name,id field:字段集合 tableData:表数据)   //tableName, fields, tableData, eventOb
    //            var tableName = tabObj.tableName;       //表的类名
    //            var fields = tabObj.fields;                     //表字段集合
    //            var tableData = tabObj.tableData;           //表数据
    //            var eventObj = tabObj.eventObj;            //表格的事件
    //            var btnArr = tabObj.btnArr;                   //按钮的配置数据
    //            var $prev = tabObj.$prev;                    //按钮行的上一个控件，用来插入按钮行

    //            var btnList = creatToobar(btnArr);         //按钮行节点（jquery对象）
    //            $prev.after(btnList);                           //插入生成的按钮行

    //            ////生成表格
    //            var lastNode = this.find(".row").children().last();                  //弹出框的最后一个控件，用来插入表格
    //            var tabDiv = $("<div class = " + tableName + "></div>");    //表格父容器
    //            var table = $("<table></table>");
    //            tabDiv.css({
    //                margin: "15px"
    //            });
    //            tabDiv.append(table);
    //            lastNode.before(tabDiv);
    //            table.bootstrapTable({
    //                data: tableData,   //e
    //                pagination: true,    //分页显示
    //                pageSize: 10,         //初始化每一页的数据条数
    //                pageList: [10, 25, 50, 100],
    //                search: false,        //显示查找框
    //                striped: false,        //背景色相间
    //                showRefresh: false,   //显示重置按钮
    //                clickToSelect: true,   //单击一行内任意单元格选中该行
    //                singleSelect: true,  //单选
    //                onCheck: function (row) {   //选中
    //                    //var rows = $('.tab table').bootstrapTable('getAllSelections');  ///getAllSelections
    //                    //按钮样式控制
    //                    var $btns = btnList.find("div");
    //                    $.each(btnArr, function (index, btnO) {
    //                        if (btnO.style != 0) {
    //                            $btns.eq(index).css({
    //                                color: "#000",
    //                                opacity: "1",
    //                                cursor: "pointer"
    //                            });
    //                            $btns.eq(index).hover(function () {    //鼠标移入
    //                                $(this).css({
    //                                    background: "#337ab7",
    //                                    color: "#fff"
    //                                });
    //                            }, function () {      //鼠标移出
    //                                $(this).css({
    //                                    background: "#fff",
    //                                    color: "#000"
    //                                });
    //                            });
    //                        }
    //                    });
    //                    //传入选中的数据，该表格的功能按钮，this为该表（jquery对象）
    //                    eventObj.onCheck.apply(table, [row]);
    //                },
    //                onUncheck: function (row) {  //取消选中
    //                    //按钮样式控制
    //                    var $btns = btnList.find("div");
    //                    console.log(btnArr, btnList.find("div"));
    //                    $.each(btnArr, function (index, btnO) {
    //                        if (btnO.style != 0) {
    //                            $btns.eq(index).css({
    //                                cursor: "no-drop",
    //                                color: "#aaa"
    //                            });
    //                            $btns.eq(index).hover(function () {        //移入
    //                                $(this).css({
    //                                    color: "#fff",
    //                                    background: "#337ab7",
    //                                    opacity: "0.7"
    //                                });
    //                            }, function () {                //移出
    //                                $(this).css({
    //                                    color: "#aaa",
    //                                    background: "#fff",
    //                                    opacity: "1"
    //                                });
    //                            });
    //                        }
    //                    });
    //                    eventObj.onUncheck.apply(table);
    //                },
    //                columns: columns(fields)
    //            });
    //            table.find(".bs-checkbox").css({
    //                "text-align": "center",
    //                "vertical-align": "middle",
    //            });
    //            function columns(colList) {   //生成表格关键数据
    //                var columns = [];
    //                columns.push({
    //                    align: 'center',
    //                    valign: 'middle',
    //                    checkbox: true
    //                });
    //                $.each(colList, function (i, val) {
    //                    var title = "<i set-lan=" + "html:" + val + ">" + val + "</i>";
    //                    var obj = {
    //                        field: val,
    //                        title: title,
    //                        align: 'center',
    //                        valign: 'middle'
    //                    };
    //                    columns.push(obj);
    //                });
    //                return columns;
    //            }
    //        }
    //        function creatToobar(btnArr) {   //生成按钮，用于操作表格（与弹出框表格配合使用）
    //            var div = $("<div class='form-group col-sm-12 col-md-12 hui'></div>");
    //            $.each(btnArr, function (index, btnO) {
    //                var iDiv = $("<div class=" + "lay" + btnO.btnName + "Btn" + "></div>");
    //                iDiv.css({
    //                    display: "inline-block",
    //                    padding: "5px 10px",
    //                    border: "1px solid #337ab7",
    //                    borderRight: "none",
    //                    cursor: "pointer"
    //                });
    //                if (index == btnArr.length - 1) {
    //                    iDiv.css({
    //                        borderRight: "1px solid #337ab7"
    //                    });
    //                }
    //                var i = $("<i></i>");
    //                i.attr("class", btnO.icon);
    //                var span = $("<span set-lan=" + "html:" + btnO.btnName + ">" + btnO.btnName + "</span>");
    //                iDiv.append(i);
    //                iDiv.append(span);
    //                div.append(iDiv);
    //                //iDiv(按钮)样式控制
    //                if (btnO.style == 0) {
    //                    iDiv.hover(function () {   //鼠标移入
    //                        $(this).css({
    //                            background: "#337ab7",    //40 96 144
    //                            color: "#fff"
    //                        });
    //                    }, function () {     //鼠标移出
    //                        $(this).css({
    //                            background: "#fff",
    //                            color: "#000"
    //                        });
    //                    });
    //                } else {                    //选中一条数据才能操作的按钮的样式
    //                    iDiv.css({
    //                        cursor: "no-drop",
    //                        color: "#aaa"
    //                    });
    //                    iDiv.hover(function () {        //移入
    //                        $(this).css({
    //                            color: "#fff",
    //                            background: "#337ab7",
    //                            opacity: "0.7"
    //                        });
    //                    }, function () {                //移出
    //                        $(this).css({
    //                            color: "#aaa",
    //                            background: "#fff",
    //                            opacity: "1"
    //                        });
    //                    });
    //                }
    //            });
    //            return div;
    //        }
    //        function field_api(field) {    //根据字段（field）找api信息，dataList:配置数据 该函数为非纯函数
    //            var obj = {};
    //            $.each(layerData, function (index, dataObj) {
    //                if (dataObj["pri"] == 2 && dataObj["field"] == field) {
    //                    obj = dataObj;
    //                }
    //            });
    //            return obj;
    //        }
    //        function loadSelectData(container, dataList) {
    //            container.html(" ");
    //            $.each(dataList, function (index, val) {
    //                var op = $("<option>" + val + "</option>");
    //                op.val(val)
    //                container.append(op);
    //            });
    //        }
    //    }
    //    ConfigReport.prototype.clickEvent = function () {
    //        var _this = this;
    //        $.each(this.pageMsg.btnMsg, function (index, btn) {//分成兩批，一批彈出大層，一批彈出小層或不彈出層
    //            var layNode = $("#" + btn.btnName + "Layer");
    //            if (btn.layerFlag) {    //需要弹出大层
    //                $("#" + btn.id).on("click", function () {
    //                    if ($(this).css("cursor") != "no-drop") {   //按钮是可交互状态
    //                        if (btn.btnName == "New") {
    //                            layNode.find("input[name=STATION]").val('ADF');
    //                            layNode.find("input[id=COLOR]").val("255");
    //                            layNode.find("input[id=EDIT_EMP]").val(self.parent.client.UserInfo.EMP_NAME);
    //                            layNode.find("input[name=CHECK_ADF_FLAG][value=0]").prop('checked', true);
    //                        }
    //                        layer.open({
    //                            type: 1,
    //                            skin: "layui-layer-lan",
    //                            title: btn.btnName + " Data",
    //                            area: ["80%", "90%"],
    //                            scrollbar: false,
    //                            content: layNode,    //该弹出层节点
    //                            maxmin: true,
    //                            success: function (layero, index) {
    //                                layNode.removeClass("hidden");//显示弹出框
    //                                fillData(_this.layerMsg[btn.btnName].showList, $(".tab table").bootstrapTable("getAllSelections")[0], layNode);    //填充数据
    //                                var b = $("." + btn.layerBtnName).find("button");   //功能按钮
    //                                var tableNode = $(".tab table");
    //                                var layerBtn = $(".layui-layer-setwin").find("a");
    //                                b.on("click", function () {
    //                                    var tempSendData = get_sendData(_this.layerMsg[btn.btnName].sendList, layNode);     //第一次处理后的发送数据
    //                                    var sendData = _this.btnClick[btn.btnName]["retSendData"].apply(layNode, [tempSendData]);             //点击按钮后二次处理待发送的数据(this:大弹框节点 传入的参数：第一次处理的发送数据 )  非常重要！！！
    //                                    //sendData用于点击功能按钮时发送给后台的数据
    //                                    self.parent.client.CallFunction(_this.apiList[btn.btnName]["className"], _this.apiList[btn.btnName]["functionName"], sendData, function (e) {
    //                                        if (e.Status == "Pass") {
    //                                            //_this.btnClick[btn.btnName]["callBackPass"].apply(layNode, [e, msg, tableNode, layerBtn]);   //弹出框 接收的数据 提示信息方法 表节点 弹出框按钮集合
    //                                            layer.msg(e.Message, {
    //                                                icon: 1,
    //                                                time: 2000
    //                                            }, function () {
    //                                                location.reload();
    //                                            });
    //                                        } else {
    //                                          //  _this.btnClick[btn.btnName]["callBackFail"].apply(layNode, [e, msg, tableNode, layerBtn]);    //弹出框 接收的数据 提示信息方法 表节点 弹出框按钮集合
    //                                            layer.msg(e.Message, {
    //                                                icon: 0,
    //                                                time: 2000
    //                                            }, function () {
    //                                            });
    //                                        }
    //                                    });
    //                                });
    //                            },
    //                            end: function () {
    //                                layNode.addClass("hidden");                                       //隐藏弹出框
    //                                layNode.find("input").each(function (index, node) {     //关闭弹出框各项数据置空
    //                                    node.value = "";
    //                                });
    //                            }
    //                        });
    //                    }
    //                });
    //            } else {
    //                $("#" + btn.id).on("click", function () {     //不需要弹出大层
    //                    if ($(this).css("cursor") != "no-drop") {   //按钮是可交互状态
    //                        var chData = $(".tab table").bootstrapTable("getAllSelections")[0];
    //                        var sendData = {};
    //                        if (chData) {
    //                            $.each(_this.apiList[btn.btnName]["colList"], function (index, field) {
    //                                sendData[field] = chData[field];
    //                            });
    //                        }
    //                        var CallFunction = function () {
    //                            self.parent.client.CallFunction(_this.apiList[btn.btnName]["className"], _this.apiList[btn.btnName]["functionName"], sendData, function (e) {
    //                                if (e.Status == "Pass") {
    //                                    layer.msg(e.Message, {
    //                                        icon: 1,
    //                                        time: 2000
    //                                    }, function () {
    //                                        location.reload();
    //                                    });
    //                                } else {
    //                                    layer.msg(e.Message, {
    //                                        icon: 0,
    //                                        time: 2000
    //                                    }, function () {
    //                                    });
    //                                }
    //                            });
    //                        }
    //                        var smallLayer = function () {
    //                            layer.open({                          //确定是否删除?
    //                                title: btn.btnName,
    //                                btn: [btn.btnName, 'Cancel'],
    //                                content: "确认此操作?",
    //                                yes: function (index) {      //确定删除
    //                                    layer.close(index);        //关闭该选择layer框
    //                                    CallFunction();
    //                                }
    //                            });
    //                        }
    //                        //选中的数据，发送数据（封装）,小弹窗
    //                        _this.btnClick[btn.btnName].apply($(this), [chData, CallFunction, smallLayer]);     //CallFunction:不需要提示    smallLayer：需要提示
    //                    }
    //                })
    //            }
    //        });
    //        //節流查询
    //        $(".query input").on("input", throttle(function () {
    //            var val = $(this).val();
    //            console.log(val);
    //            var sendData = {};
    //            var key = _this.apiList.select["colList"][0];
    //            sendData[key] = val;
    //            self.parent.client.CallFunction(_this.apiList.select["className"], _this.apiList.select["functionName"], sendData, function (e) {
    //                if (e.Status == "Pass") {
    //                    $(".tab table").bootstrapTable("load", e.Data);
    //                    $(".tab table").find(".bs-checkbox").css({
    //                        "text-align": "center",
    //                        "vertical-align": "middle",
    //                    });
    //                    layer.msg(e.Message, {
    //                        icon: 1,
    //                        time: 2000
    //                    }, function () {
    //                    });
    //                } else {
    //                    layer.msg(e.Message, {
    //                        icon: 0,
    //                        time: 2000
    //                    }, function () {
    //                    });
    //                }
    //            });
    //        }, 1000));
    //        //函数（处理数据）
    //        function fillData(fields, dataList, container) {   //填充数据
    //            //console.log(fields, dataList, container);
    //            $.each(fields, function (index, o) {
    //                if (o.fillFlag) {
    //                    var node = container.find("[name=" + o.field + "]");
    //                    if (node[0].type == "radio") {
    //                        if (dataList[o.field] == "1") {
    //                            $(node[0]).prop('checked', true);
    //                        } else {
    //                            $(node[1]).prop('checked', true);
    //                        }
    //                    } else if (dataList) {
    //                            node[0].value = dataList[o.field];
    //                        }
                        
    //                    if (o.field == "EDIT_EMP") {
    //                        node[0].value = self.parent.client.UserInfo["EMP_NO"];
    //                    }
    //                }
    //            });
    //        }
    //        function get_sendData(fields, container) {     //用于生成发送数据
    //            var sendData = {};
    //            $.each(fields, function (index, val) {
    //                var $node = container.find("[name=" + val + "]");
    //                if ($node.length > 0) {
    //                    sendData[val] = $node[0].value;
    //                    if ($node[0].type == "radio") {       //兼容单选框，复选框
    //                        sendData[val]=$("input[name="+val+"]:checked").val();
    //                        //$node.each(function (index, node) {
    //                        //    if (node.checked) {
    //                        //        sendData[val] = node.value;
    //                        //    }
    //                        //});
    //                    }
    //                    if ($node[0].type == "checkbox") {
    //                        sendData[val] = [];
    //                        $node.each(function (index, node) {
    //                            if (node.checked) {
    //                                sendData[val].push(node.value);
    //                            }
    //                        });
    //                    }
    //                    //if (container.find("[name=" + val + "]")[0].tagName == "TEXTAREA") {
    //                    //    var valList = container.find("[name=" + val + "]")[0].value.split(/ +|,+|\n+/m);
    //                    //    var newVal = [];
    //                    //    $.each(valList, function (index, value) {
    //                    //        if (value != "") {
    //                    //            newVal.push(value);
    //                    //        }
    //                    //    });
    //                    //    sendData[val] = newVal;
    //                    //}
    //                } else {
    //                    sendData[val] = self.parent.client.UserInfo[val];
    //                }
    //            });
    //            return sendData;
    //        }
    //        function throttle(fn, wait) {    //节流
    //            var timer;
    //            return function () {
    //                clearTimeout(timer);
    //                var _this = this;
    //                var args = arguments;
    //                timer = setTimeout(function () {
    //                    fn.apply(_this, args);
    //                }, wait);
    //            }
    //        }
    //    };
    //    this.Init();
    //}

</script>
</html>
